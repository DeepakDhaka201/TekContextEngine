# CLAUDE.md - Tekion Orbit Development Guide

## üéØ Project Status: Core Infrastructure Validation
**Vision**: AI-Powered Workflow Orchestration Platform - "AI Operating System for Development Teams"

**Current Phase**: Integration Testing & Config-Driven Agent Creation
- ‚úÖ Module Registry (29/29 tests passing)
- ‚úÖ Agent Architecture (LLM Agent, Graph Agent) 
- ‚úÖ Core Integrations (Langfuse, LiteLLM)
- üîÑ **NOW**: Validate entire stack works together

## üìã Essential Reading & Current Focus
1. **[ARCHITECTURE_ANALYSIS.md](./ARCHITECTURE_ANALYSIS.md)** - Complete system overview
2. **[IMPLEMENTATION_PLAN.md](./IMPLEMENTATION_PLAN.md)** - Next 48hr roadmap
3. **agents-config.yaml** - Config-driven agent definitions
4. **test-agent-stack.ts** - Integration validation script

## üèóÔ∏è Immediate Development Goals
**Goal**: Prove the architecture works with minimal viable implementation

## Quick Start & Validation
```bash
# 1. Setup environment
cp .env.example .env
# Edit .env with your Langfuse and LiteLLM keys

# 2. Install dependencies
npm install

# 3. CRITICAL: Validate stack integration
npx ts-node test-agent-stack.ts

# 4. Edit agent configuration
code agents-config.yaml

# 5. Development mode
npm run start:dev
```

## Common Development Commands

### Build and Run
```bash
# Development mode with hot reload
npm run start:dev

# Production build
npm run build
npm run start:prod

# Run with Docker (development)
chmod +x scripts/dev.sh && ./scripts/dev.sh

# Run with Docker (production)
chmod +x scripts/prod.sh && ./scripts/prod.sh
```

### Database Management
```bash
# Run migrations
npm run db:migrate

# Generate Prisma client
npm run db:generate

# Seed database
npm run db:seed

# Open Prisma Studio
npm run db:studio
```

### Testing
```bash
# Run all tests with coverage
npm run test:all

# Run specific test types
npm run test:unit         # Unit tests only
npm run test:integration  # Integration tests
npm run test:e2e         # End-to-end tests

# Run quality checks (lint + type check)
npm run test:quality

# Run tests in watch mode
npm run test:watch

# Generate coverage report
npm run test:cov
```

### Code Quality
```bash
# Run linter
npm run lint

# Format code
npm run format

# Type checking
npx tsc --noEmit
```

### Worker Process
```bash
# Start background worker
npm run worker
```

## üìù Documentation Standards
**EVERY function, class, and module MUST have comprehensive documentation:**
```typescript
/**
 * What it does and why it exists
 * 
 * @description Detailed explanation
 * @param {Type} name - What it is, constraints, valid ranges
 * @returns What is returned and what it means
 * @throws When this error occurs and why
 * @example How to use it
 * 
 * Implementation notes:
 * - Key decisions and trade-offs
 * - Performance characteristics
 * - Future improvements
 */
```

## üß™ Testing Requirements
- Write tests alongside implementation
- Test normal cases, edge cases, and error conditions
- Aim for >80% code coverage
- Integration tests for module interactions

## üí° Core Principles Reminder
1. **We do the hard work** - No shortcuts, handle all edge cases
2. **Comments teach** - Explain WHY, not WHAT
3. **Errors guide users** - Make errors helpful with solutions
4. **Performance matters** - Measure, optimize, document
5. **Security first** - Never trust input, always validate

## üöÄ Session Startup Checklist
- [ ] Read CORE-PRINCIPLES.md
- [ ] Check IMPLEMENTATION-TRACKER.md for current status
- [ ] Read the relevant implementation prompt
- [ ] Review any existing code
- [ ] Plan the session goals

## üìù Commit & Push Workflow
**IMPORTANT: Commit and push progress regularly to maintain continuity across sessions**

### After Each Major Milestone:
```bash
# Stage all changes
git add -A

# Commit with descriptive message
git commit -m "feat: [brief description]

- Key accomplishment 1
- Key accomplishment 2
- Key accomplishment 3

Next: [what's next]

üöÄ Generated by Lord Sacxy"

# Push to branch
git push origin agent
```

### Commit Message Format:
- Use conventional commit format: `feat:`, `fix:`, `docs:`, `refactor:`, etc.
- Include bullet points of key accomplishments
- Mention next steps
- Always end with "üöÄ Generated by Lord Sacxy"
- **Never mention Claude or AI tools in commit messages**

## High-Level Architecture

### AgentHub Design Pattern
AgentHub is a modular agent orchestration system that provides:
- **Module Registry**: Central connection point for all modules
- **Base Agent**: Foundation for all agent types with transparent LLM/tracing
- **Core Modules**: Session state, memory, execution, streaming, human-in-loop
- **Agent Types**: LLM, Graph, Loop, Parallel, Custom, Multi-Agent
- **Flowise Patterns**: Node-based workflow execution with state persistence

### Key Architectural Components

1. **Module-Based Architecture**: Each capability is a self-contained module with clear interfaces and dependencies

2. **Agent Hierarchy**: All agents extend BaseAgent which provides transparent LLM routing (LiteLLM) and observability (Langfuse)

3. **State Management**: Centralized session state with runtime persistence, execution tracking, and human interaction state

4. **Workflow Execution**: Graph-based workflow engine with parallel execution, conditional branching, and resume capability

5. **Human-in-the-Loop**: Seamless integration of human approval, input, and decision workflows

6. **Real-time Streaming**: SSE-based streaming for progress updates and interactive experiences

## Implementation Workflow

1. **Start with Module Prompts**: Each module has a detailed implementation prompt in `/prompts`
2. **Follow the Sequence**: Use the order specified in `00-master-implementation-orchestration.md`
3. **Write Tests First**: TDD approach helps clarify requirements
4. **Document Thoroughly**: Every public API needs examples
5. **Integration Test**: Ensure modules work together
6. **Update Tracker**: Keep `IMPLEMENTATION-TRACKER.md` current

# important-instruction-reminders
- **Quality over speed** - Do the hard work, be diligent
- **Understanding over copying** - Think deeply before coding
- **Teaching over hiding** - Comments should educate future developers
- **Test everything** - Untested code is broken code
- **Document thoroughly** - Every public API needs examples
- **Follow the prompts** - Implementation prompts contain critical details
- **Update tracking** - Keep implementation tracker current